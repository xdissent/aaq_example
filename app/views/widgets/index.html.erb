<h1>Widgets#index</h1>

<pre><%=h @query.inspect %></pre>

<hr>

<% form_tag({}, :id => 'query_form', :onsubmit => "return false;") do %>

  <%= query_filters @query %>
  
  <%= query_columns @query %>

  <%#= query_options @query %>

  <%= link_to_remote "Apply", { 
        :url => { :set_filter => 1 },
        :before => 'selectAllOptions("selected_columns");',
        :update => "content",
        :complete => "apply_filters_observer()",
        :with => "Form.serialize('query_form')"
      } %>              
<% end %>

<hr>
  
<ul>
  <% @widgets.each do |widget| %>
    <li><pre><%=h widget.inspect %></li>
  <% end %>
</ul>